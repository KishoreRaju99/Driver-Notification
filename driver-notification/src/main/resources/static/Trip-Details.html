<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip Details</title>
    <link rel="stylesheet" href="css/commontheme.css">
    <link rel="stylesheet" href="css/stylesheet.css">
    
</head>
<body>

    <div class="container-fluid">
        <div class="row">
            <!-- Tablet Navigation Part Starts Here -->
            <div class="col-md-12">
                <div class="col-md-4 float-start">
                    <img src="images/Logo.svg" alt="icon" class="logo">
                </div>
                <div class="col-md-4 float-start text-center p-1 status-bar justify-content-center assigned">
                    <p class="status">Assigned Trip</p>
                </div>
                <div class="col-md-4 float-start icon-part ">

                    <!-- Admin Contact Part Starts Here -->
                    <div class="dropdown float-start">
                        <a href="#" data-toggle="dropdown" aria-expanded="false"> <img class="cursor mt-1" src="images/Phone-icon.svg" alt="filter-icon" title="Advanced Filter" /></a>
                        <div class="dropdown-menu m-0 admin-contact">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-md-12 pb-2 border-0 mt-2 close-filter"><span class="text-style-title filter-title">Admin Contacts</span>
                                        <button type="button" class="btn-close float-end cross-icon" data-bs-dismiss="advanced-filter" aria-label="Close">
                                        </button>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="row mb-3">
                                            <div>
                                                <label class="float-start mb-3"><a class="link contact-number"
                                                        href="#">+91 (123)456-7890</a>-Raghavan</label>
                                                <label class="float-start"><a class="link contact-number" href="#">+91
                                                        (456)778-4569</a>-Santhosh</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Admin Contact Part Ends Here -->



                    <!-- Notifications Part Starts Here -->
                    <div class="dropdown float-start">
                        <a href="#" data-toggle="dropdown" aria-expanded="false"> 
                            <img class="cursor ms-4" src="images/Bell-icon.svg" alt="filter-icon" title="Advanced Filter"/></a>
                        <div class="dropdown-menu m-0 advanced-filter">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-md-12 pb-2 border-0 mt-2 close-filter"><span
                                            class="text-style-title filter-title fw-bold">Notifications</span>
                                            <button type="button" class="btn-close float-end cross-icon" data-bs-dismiss="advanced-filter" aria-label="Close">
                                        </button>
                                    </div>
                                    <div class="col-md-12 ps-0">
                                        <div class="row mb-3">
                                            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                                                <li class="nav-item nav-1" role="presentation">
                                                  <a class="nav-link nav-link1 active " id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Assigned Trips</a>
                                                </li>
                                                <li class="nav-item nav-2" role="presentation">
                                                  <a class="nav-link nav-link2 " id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Completed Trips<span class="not-count ms-2">2</span></a>
                                                </li>
                                                
                                              </ul>
                                              <div class="tab-content" id="pills-tabContent">
                                                <div class="tab-pane active nav-1-toggle" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                      <div class="col-md-12 mt-2 mb-3 p-0 not-content1" data-toggle="modal" data-target="#tripstarted">
                                                                <p class="float-end indicator mt-0">Just Now</p>
                                                                <h5 class="">You have been assigned a trip</h5>
                                                                <a class="float-start footer-link pb-4"><img
                                                                        src="images/Map-table.svg" alt="map-icon"
                                                                        class="mx-1 map-icon1">Alpha City To Sholinganallur @ 8:30
                                                                    PM </a>
                                                            </div>
                                                            <div class="col-md-12 mb-3 mt-2 p-0">
                                                                <p class="float-end indicator mt-0">2h ago</p>
                                                                <h5 class="">You have been assigned a trip</h5>
                                                                <a class="float-start footer-link"><img
                                                                        src="images/Map-table.svg" alt="map-icon"
                                                                        class="mx-1 map-icon1">Alpha City To Sholinganallur @ 8:30
                                                                    PM </a>
                                                            </div>
                                                        </div>
                                                   
                                                    <div class="col-md-6 float-start mt-1 mb-0 p-0">
                                                        
                                                            <p class="mb-0 not-status">2 Notifications</p>
                                                        
                                                    </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane  nav-2-toggle" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-12 mt-1 mb-3 p-0 not-content1">
                                                                <p class="float-end indicator mt-0 p-1">Just Now</p>
                                                                <a class="float-start footer-link pb-4"><img
                                                                        src="images/Tick-Icon.svg" alt="tick-icon" class="mx-1">Alpha
                                                                    City To Sholinganallur @ 8:30 PM </a>
                                                            </div>
                                                            <div class="col-md-12 mt-1 mb-3 p-0">
                                                                <p class="float-end indicator mt-0 p-1">2h ago</p>
                                                                <a class="float-start footer-link"><img
                                                                        src="images/Tick-Icon.svg" alt="tick-icon" class="mx-1">Alpha
                                                                    City To Sholinganallur @ 8:30 PM </a>
                                                            </div>
                                            
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 ms-3 mt-4 mb-0">
                                                        <div class="col-md-6 float-start">
                                                            <p class="mb-0 not-status">2 Notifications</p>
                                                        </div>
                                                        <div class="col-md-4 float-end">
                                                            <a href="#" class="footer-link">
                                                                <h3 class="mb-0 clr-all">Clear All</h3>
                                                            </a>
                                                        </div>
                                            
                                                    </div>
                                            
                                                </div>
                                               
                                              </div>
                                              
                                          



                                    </div>


                                </div>

                            





                        </div>
                    </div>
                        </div>
                    </div>
                   <!-- Notifications Part Ends Here -->



























                  


                    <!-- Log Out Starts Here -->

                    <div class="dropdown float-start">
                        <a href="#" data-toggle="dropdown" aria-expanded="false">  <span class="dot ms-4" >MG</span></a>
                        <div class="dropdown-menu m-0 sign-out">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-md-12 border-0 mt-2 close-filter">
                                <button type="button" class="btn-close float-end cross-icon" data-bs-dismiss="advanced-filter" aria-label="Close">
                                        </button>
                                    </div>
                                    <div class="col-md-12 mx-2 log-content">
                                        <div class="row mb-3">
                                            <div>
                                                <img src="images/User-Icon.svg" class="ps-4" alt="user-icon">
                                                <h5 class="mt-2 mb-4">TN 007 5676</h5>
                                                <button type="button" class="btn btn-primary btn-lg pe-4">Log Out</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Log Out Ends Here -->
                   
                </div>
            </div>
<!-- Tablet Navigation Part Ends Here -->

<!-- Trip Details and Start-Trip Button Starts Here-->


<div class="col-md-12 p-3">
    <div class="row">
        <div class="col-md-12 ps-4">
            <div class="col-md-6 float-start">
               <ul class="trip-settings p-0" id="uldetails">
                    <li class="trip-settings"><a  class="footer-link"><img src="images/Line-Icon.svg" alt="icon" class="line-icon p-0 "><span class= "Head"></a>Trip Details</span></li> 
                    
                 </ul>
            </div>
            <div class="col-md-6 float-start button-div">
                <button type="button" class="btn btn-primary btn-sm button1" data-toggle="modal" data-target="#starttrip">Start Trip</button>
            </div>
            
            
            
        </div>
          
        
            
      
    </div>
</div>





<!-- Trip Details and Start-Trip Button Ends Here-->



<!--Table Starts Here-->
<div class="col-md-12">
    <div class="row">
        <div class="col-md-4 mx-1 left-col float-start">          
            <h5 class="fw-bold">Employee Details</h5>
</div>
           <div class="col-md-6 show-header">
                <h5 class="float-start no-show fw-bold"><span class="footer-link1"><img src="images/No-Show.svg" alt="icon" class= "map-icon" >No Show</span></h5>
                <h5 class=" table-head show-head show float-start fw-bold"><span class="footer-link2"><img src="images/Show.svg" alt="icon" class= "map-icon" >Show</span></h5>
            </div>
    </div>
</div>

            </div>
          <div id="divid">
            
          </div>
  
              
    <!-- Modal -->
<div class="modal fade" id="starttrip" tabindex="-1" aria-labelledby="starttrip" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header text-center mx-3">
            <a><img src="images/Tick-Icon.svg" alt="tick-icon" class="mx-2">Please ensure that all the employees are present?</a>
          <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
        </div>
        
        <div class="modal-footer mb-3 me-3">
          <button type="button" class="btn btn-secondary Close-button pe-4" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-secondary Ok-button" id="submitBtn">Start</button>
        </div>
      </div>
    </div>
  </div>
  </div>
    </div>


    <!--Script Starts Here-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        $('.advanced-filter').click(function (event) {
            event.stopPropagation();

        });
        $('.btn-close').click(function () {
            $('.advanced-filter').removeClass('show');
        })
        $('.nav-1').click(function (event) {
           $('.nav-1-toggle').show();
           $('.nav-2-toggle').hide();

        });
        $('.nav-2').click(function (event) {
           $('.nav-2-toggle').show();
           $('.nav-1-toggle').hide();

        });
        $('.nav-link1').addClass('active');
        $('.nav-link1').click(  function(){
           $('.nav-link1').addClass('active');
           $('.nav-link2').removeClass('active');
         
           })
           $('.nav-link2').click(  function(){
            $('.nav-link2').addClass('active');
            $('.nav-link1').removeClass('active');
         
           })
    </script>
     <script>
var id=10001;
var xhr = new XMLHttpRequest();
window.onload= getdetail;
var count;

function getdetail(){
xhr.open("GET","http://localhost:8080/Address/"+id,true);
		
	 	    xhr.onreadystatechange=processResponse;
	 		 	    
	 	    xhr.send(null); 
	 	    }
	 	    
function processResponse(){
	
	  	    if(xhr.readyState == 4 && xhr.status == 200)
		    {
		
			 var arr=JSON.parse(xhr.responseText);
			 count=arr.length;
			 for(var i=0;i<arr.length;i++){
				
				
				if(i%2==0){
	
	 var div1=document.createElement('div');
	 div1.className="col-md-12 mt-2 alt-row";
	 
	 }
	 
	 else
	 {
		var div1=document.createElement('div');
	 div1.className="col-md-12 mt-2 ";
	}
	
	 var div2=document.createElement('div');
	 div2.className="row";
	 
	  var div3=document.createElement('div');
	 div3.className="col-md-4 left-col mx-1 mt-2 float-start";
	 
	 
	  var div4=document.createElement('div');
	 div4.className="col-md-6 show-header mt-2";
	 
	  var div5=document.createElement('div');
	 div5.className="parent";
	 
	 
	  var div6=document.createElement('div');
	 div6.className="custom-radio tivasta-w-100 no-show-button";
	 
	  var div7=document.createElement('div');
	 div7.className="custom-radio tivasta-w-100 show-button";	 
	 
	 
 var list=document.createElement('ul');
 list.className="p-0";

  
  var listitem1=document.createElement('li');
 listitem1.className="Name";
  listitem1.innerText=arr[i].employeeName;
  
  
  var listitem2=document.createElement('li');
 listitem2.className="Emp-ID";
 listitem2.innerText=arr[i].employeeId;
  
  var listitem3=document.createElement('li');
 listitem3.className="Address";

 listitem3.innerHTML="<img src='images/Map-table.svg' alt='icon' class= 'map-icon' >"+arr[i].dropPoint;

 list.appendChild(listitem1);
  list.appendChild(listitem2);
  list.appendChild(listitem3);
  
 div3.appendChild(list);
 
 
div6.innerHTML="<input type='radio'  id='radio-"+(i+(i+1))+"'name='radio"+i+"' value='r-opt1-db'  class='noshow' checked=''>"+" <label for='radio-"+(i+(i+1))+"'></label>";
div7.innerHTML="<input type='radio' id='radio-"+(i+(i+2))+"' name='radio"+i+"' value='r-opt2-db'>"+"<label for='radio-"+(i+(i+2))+"'></label>";

div5.appendChild(div6);
div5.appendChild(div7);
div4.appendChild(div5);
div2.appendChild(div3);
div2.appendChild(div4);

div1.appendChild(div2);
document.getElementById('divid').appendChild(div1);

				
		    }
		    
		    
	 var l=document.createElement('li');
l.className="trip-settings";
var hour=arr[0].timeSlot.split(":");
if(hour[0]<12){
	if(hour[0]>=10){
		
		l.innerHTML="<img src='images/Clock.svg' alt='icon' class='detail-icon p-0'>"+hour[0]+":"+hour[1]+" AM";
		
	}
	else {
		if(hour[0]==00){
			l.innerHTML="<img src='images/Clock.svg' alt='icon' class='detail-icon p-0'>"+"12"+":"+hour[1]+" AM";
		}
		
		else{
			l.innerHTML="<img src='images/Clock.svg' alt='icon' class='detail-icon p-0'>"+"0"+hour[0]+":"+hour[1]+" AM";
		}
	}
}
else{
	var hr=hour[0]-12;
	if(hour[0]>=10){
		
		l.innerHTML="<img src='images/Clock.svg' alt='icon' class='detail-icon p-0'>"+hr+":"+hour[1]+" PM";
		
	}
	
		
		else{
			l.innerHTML="<img src='images/Clock.svg' alt='icon' class='detail-icon p-0'>"+"0"+hr+":"+hour[1]+" PM";
		}
	}
	
	
	
	
	
}



var l2=document.createElement('li');
l2.className="trip-settings";
l2.innerHTML= "<img src='images/Map.svg' alt='icon' class='mt-2 detail-icon'>"+  arr[0].destination+"  to  "+arr[0].source ;

var l3=document.createElement('li');
l3.className="trip-settings";
l3.innerHTML= "<img src='images/People.svg' alt='icon' class='detail-icon'>"+  count  +" Passengers " ;

document.getElementById("uldetails").appendChild(l);	    
	document.getElementById("uldetails").appendChild(l2);	
	document.getElementById("uldetails").appendChild(l3);	    
		    
}








var start = new XMLHttpRequest();


 
	var submitBtn = document.getElementById("submitBtn");
		submitBtn.addEventListener('click',starttrip);
		
function starttrip(){
	

var noshowlist=new Array();

for(var i=0;i<count;i++)
{
	var div =  document.getElementById("divid");
	var radiv=document.getElementById("radio-"+(i+(i+1)));
	
	
	if(radiv.checked==true)
	{
		
		const arr=Array.prototype.slice.call(div.getElementsByClassName("Emp-ID"))
		console.log(arr);
		var res={"employeeId":arr[i].innerText}
		noshowlist.push(res);
		
		
	}
	
	
	
	console.log(noshowlist);
	
	
}
	

 

	var url = "http://localhost:8080/update/for/"+10001;
		
			start.open("PUT",url,true);
		
	 	    start.onreadystatechange=processResponse2;

	  	    start.setRequestHeader("Content-Type", "application/json");
	      
	  	    start.send(JSON.stringify(noshowlist));
	
		}
	
		function processResponse2(){
			7
			if(start.readyState == 4 && start.status == 200)
		    {
	           var response = xhr.responseText;
	           alert("record updated successfully");
	           
		    }
		}




















</script>
<!--Script Ends Here-->
</body>

   
</html>
